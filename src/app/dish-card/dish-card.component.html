<div class="dish" *ngIf="dish"
     [ngClass]="{'most-expensive' : menuMode && (mostExpensive == dish.price)
     , 'cheapest': menuMode && (cheapest == dish.price),
     'dish-hover': menuMode}"
>
    <header>
        <div [ngClass]="{'no-images': dish.imagePaths.length === 0}" class="dish-img-container">
            <div class="delete" *ngIf="menuMode" (click)="onDishDelete()"><i class="ph ph-x"></i></div>
            <i *ngIf="dish.imagePaths.length===0" class="ph ph-hamburger"></i>
            <img
                    class="dish-img"
                    (click)="onDishDetailsNavigate()"
                    src="{{ dish.imagePaths.length> 0 ? dish.imagePaths.at(0)['imagePath'] : '' }}"
                    alt=""/>
        </div>
        <div class="header-container">
            <div class="tags">
                <div class="tag" [ngClass]="{'tag--vegan': dish.type==='vegan',
      'tag--vegetarian': dish.type === 'vegetarian', 'tag--meat': dish.type === 'meat'}">{{dish.type}}</div>
            </div>
            <p class="dish-name">{{ dish.name | uppercase}}</p>
        </div>
    </header>
    <section>
        <div class="content">
            <div *ngIf="menuMode" class="rating-stars">
                <app-rating-stars [review]="dish.rate"
                                  [readonly]="true"></app-rating-stars>
            </div>

            <div class="dish-attributes">
                <div class="dish-attribute">
                    <i class="fas fa-solid fa-map-pin"></i>
                    <p>Cuisine: {{ dish.cuisine | uppercase }}</p>
                </div>
                <div class="dish-attribute">
                    <i class="fas fa-regular fa-utensils"></i>
                    <p>Category: {{ dish.category }}</p>
                </div>
            </div>

            <div class="bottom-box">
                <div class="amount-box">
                    <p class="dish-amount"
                       [ngStyle]="{color: dish.quantity - reservedDishesAmount <= dangerousDishAmount ? 'red':'#333'}"
                       *ngIf="reservedDishesAmount < dish.quantity">
                        {{!menuMode ? 'Reserved amount: ' + reservedDishesAmount : 'Amount: ' + (dish.quantity - reservedDishesAmount)}}</p>
                    <p class="dish-amount" *ngIf="menuMode && reservedDishesAmount === dish.quantity"> Not
                        available </p>
                    <div class="amount-buttons">
                        <div class="add-button"
                             (click)="onAddDish()"
                             [ngStyle]="{display: reservedDishesAmount < dish.quantity ? 'block' : 'none'}"
                        >
                            <i class="fas fa-plus-square fa-lg button"></i>
                        </div>

                        <div class="subtract-button"
                             (click)=onSubtractDish()
                             [ngStyle]="{display: reservedDishesAmount > 0 ? 'block' : 'none'}">
                            <i class="fas fa-minus-square fa-lg button"></i>
                        </div>
                    </div>
                </div>
                <span
                        class="price">Price: {{selectedCurrency ? calculatedPrice + selectedCurrency : dish.price + dish.currency }}</span>
            </div>
        </div>
    </section>
    <div *ngIf="menuMode && dish.imagePaths && dish.imagePaths.length>1" class="row">
        <div class="col">
            <a>More photos</a>
        </div>
    </div>
</div>


